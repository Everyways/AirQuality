<?php/* * Récupere les infos insee via appel curl selon code postal renseigné */class TownToCheck{    private $oCurlCaller;    public function __construct()    {        $this->oCurlCaller = new CurlCaller();    }    /**     * Retourn l'url d'appel     * @param string $sZip     * @return string     */    public function getUrl(string $sZip)    {        return 'https://public.opendatasoft.com/api/records/1.0/search/?dataset=correspondance-code-insee-code-postal&q=' . $sZip . '&facet=insee_com&facet=nom_dept&facet=nom_region&facet=statut';    }    /**     * Retourne les données insee     * @param array $aZipCode     * @return \stdClass     */    public function getInseeDatas(array $aZipCode)    {        $oDatas = new stdClass;        foreach ($aZipCode as $nZip => $sName) {            $sTownUrl = $this->getUrl($nZip);            $sTownData = $this->oCurlCaller->get($sTownUrl, []);            $oDatas->$nZip = json_decode($sTownData);        }        return $oDatas;    }}